<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests;">
    <title>1387 Chat Room</title>
    <style>
	    
		input {
    		background-color: #ffffff;
    		border: #0071ff solid 1px;
    		color: black;
			box-sizing: conte-box;
		}
		input:focus {
    		border-style: solid;
    		border-color: #03a9f4;
    		box-shadow: 0 0 10px #f4a903;
    		outline: none;
		}
        code {
            color: #c7254e;
            background-color: #f9f2f4;
        }
		.selects{
			background:rgba(0,0,0,0.15);
			border-radius:10px;
			border:none;
			font-family:"Microsoft YaHei UI light";
		}
		button {
			background-color: #123456;
			border: none;    
    		color: white;
			text-align: center;
			display: inline-block;
			border-radius:8px;
			font-size: 15px;
    	}
	    button:focus{
            background-color: #001234;
			border: 2px;    
    		color: white;
			text-align: center;
			display: inline-block;
			border-radius:8px;
			font-size: 15px;
        }
        .lanch{
            background-color: #007eff;
            color: white;
            padding: 7px;
	    text-align: right;
	    margin-left: auto;
	    margin: 0px;
        }
		.leoth{
            background-color: #007eff;
            margin: 0px;
            color: white;
            padding: 7px;
	    margin-left: auto;
        }
	.phing{
            background-color: #007eff;
            margin: 0px;
            color: white;
            padding: 7px;
	    text-align: center;
	    margin-left: auto;
        }
    </style>
    <script>
    var nowname;
    function apt(tin,wm){
	    return '&' + tin + '=' + wm;
    }
    function apd(act){
		var yon = 'https://tinywebdb.appinventor.space/api?user=name317&secret=53c40c78&action=' + act;
		return yon;
    }
    function pt(o,...args){
		var xhr = new XMLHttpRequest();
        var url = '';
		if (o === 'count'){
			url = apd(o);
		}
		else if (o === 'get'){
			url = apd(o) + apt('tag',args[0]);
		}
		else if (o === 'delete'){
			url = apd(o) + apt('tag',args[0]);
		}
		else if (o === 'update'){
			url = apd(o) + apt('tag',args[0]) + apt('value',args[1]);
		}
		else if (o === 'search'){
			url = apd(o) + apt('no',args[0]) + apt('count',args[1]) + apt('tag',args[2]) + apt('type',args[3]);
		}
		xhr.open("GET", url, false); 
		xhr.send();
		if (xhr.status === 200) {
		    return(xhr.responseText);
		} else {
		    return(xhr.statusText);
		}
   	};
	function login(){
		var d1 = document.getElementById('naee').value;
		var d2 = document.getElementById('phin').value;
		var d3 = JSON.parse(pt('get',d1 + '_password'));
		if (d3[d1 + '_password'] !== d2){
			alert("用户名或密码错误！");
		}
		else{
			alert("登陆成功！");
		}
	};
	function lange(){
		var d1 = document.getElementById('naee').value;
		var d2 = document.getElementById('phin').value;
		if (pt('update',d1 + '_password',d2)){
			alert("创建账号成功！");
		}
		else{
			alert("创建账号失败！");
		}
	};
    </script>
</head>
<body>
    <div class = "leoth">
    <a href="https://yxy317coder.github.io/chatroom"><img src="src/pic.png" alt="三幺七的聊天室~~~"></a>
    </div>
    <div class = "phing">
    <input type = "input" id = "naee"></input>
    <br>
    <input type = "input" id = "phin"></input>
	<br>
	<br>
	<span><button onclick = "login()">登录</button><button onclick = "lange()">注册</button></span>
    </div>
</body>
</html>
